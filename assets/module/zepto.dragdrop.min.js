!function(t){"use strict";function e(e,o){var s=t.touchable?"touchstart":"mousedown",r=e.offset();this.opts=o||{},this.ctx=this.opts.context||e,this.pos={left:r.left,top:r.top},this.opts.selector?e.on(s,this.opts.selector,t.proxy(this.start,this)):e.on(s,t.proxy(this.start,this))}function o(){return s&&(s.drag(),window.requestAnimationFrame(o)),!1}var s;e.prototype={constructor:e,start:function(e){var r;s||(this.curEl=t(e.currentTarget),r=this.curEl.offset(),this.curEl.data(r),this.setRevert(r),this.setZIndex(1),this.opts.start&&this.opts.start.call(this.ctx,this.curEl),this.curEl.trigger("draggable:start",[e,this.curEl]),this.setPosition(e),s=this,o()),e.preventDefault(),e.stopPropagation()},stop:function(t){s&&(t.el=this.curEl,this.setZIndex(-1),this.opts.stop&&this.opts.stop.call(this.ctx,this.curEl),this.curEl.trigger("draggable:end",[t,this.curEl]),o(),s=null),t.preventDefault(),t.stopPropagation()},drag:function(){this.curEl.css(this.pos),this.opts.drag&&this.opts.drag.call(this.ctx,this.curEl)},setPosition:function(e){var o=t.getPos(e),s=this.curEl.height(),r=this.curEl.width(),i=this.findOffset();this.pos={left:o.x-r/i,top:o.y-s/i},e.preventDefault(),e.stopPropagation()},setRevert:function(t){this.opts.revert&&!this.curEl.data("revert")&&this.curEl.data({rtop:t.top,rleft:t.left,revert:this.opts.revert})},findOffset:function(){var t=this.curEl.data("width"),e=this.curEl.width();return t>e?2*t/e:2*e/t},setZIndex:function(t){var e=parseInt(this.curEl.css("z-index"),10);this.curEl.css("z-index",e+t)}},t.fn.draggable=function(o){return this.each(function(){var s=t(this),r=s.data("draggable");r||(r=new e(s,o),s.data("draggable",r))})},t(function(){t(document).on("mousemove touchmove mouseup touchend",function(t){if(s){switch(t.type){case"mousemove":case"touchmove":s.setPosition(t);break;case"mouseup":case"touchend":s.stop(t)}t.preventDefault(),t.stopPropagation()}})})}(window.Zepto),function(t){"use strict";function e(t,e){this.el=t,this.opts=e||{},this.ctx=this.opts.context||this.el}function o(o){var r,i,n=o.el;n&&(i=t.getPos(o),r=s(o,i),r?r.drop(o,i):n.data("revert")&&e.prototype.revert(n)),o.preventDefault(),o.stopPropagation()}function s(e,o){var s,r=e.el;return r.css({display:"none"}),s=t.elementFromPoint(o.x,o.y),r.css({display:"block"}),t(s).data("droppable")}e.prototype.drop=function(e,o){var s=!0,r=t(e.el);this.opts.drop&&(s&=this.opts.drop.call(this.ctx,e,r,this.el,o)),s&&this.el.trigger("droppable:drop",[e,r,this.el,o]),!s&&r.data("revert")&&this.revert(r)},e.prototype.revert=function(e){var o=e.data("rleft"),s=e.data("rtop"),r=e.data("revert");t.isFunction(r)&&r.call(e),e.css({left:o,top:s})},t.fn.droppable=function(o){return this.each(function(){var s=t(this),r=s.data("droppable");r||(r=new e(s,o),s.data("droppable",r))})},t(function(){t(document).on("mouseup touchend",o)})}(window.Zepto),function(t){"use strict";var e=navigator.userAgent.match(/PhantomJS/);t.touchable=function(){return!!("ontouchstart"in window)&&!e}(),t.getPos=function(e){var o,s={};return t.touchable?(o=e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0],s={x:o.pageX,y:o.pageY}):s={x:e.pageX,y:e.pageY},s};var o=document;t.elementFromPoint=function(t,e){var s=!1,r=window.pageYOffset,i=window.pageXOffset,n=window.innerHeight,a=window.innerWidth;return r>0?s=!o.elementFromPoint(0,r+n-1):i>0&&(s=!o.elementFromPoint(i+a-1,0)),s?o.elementFromPoint(t-i,e-r):o.elementFromPoint(t,e)},window.requestAnimationFrame=function(t,e){for(;t--&&!(e=window["oR0msR0mozR0webkitR0r".split(0)[t]+"equestAnimationFrame"]););return e||function(t){setTimeout(t,15)}}(5)}(window.Zepto);