$(document).ready(function(){$(document.body).transition("init").show()}),function(t){function e(t){var e=t.indexOf("?");return e>0&&(t=t.slice(0,e)),t.replace(/[:\.\+\/]/g,"_")}function a(t){if(window.location.hash){var e=i(window.location.pathname,window.location.hash.slice(1));e.length&&(t=t.replace(/(\b(src|href|action))="([^"#:]+)"/gi,'$1="'+e+'$3"'),t=t.replace(/(\b(src|href|action))="(.+\/)?[^\/]+\/\.\.\//gi,'$1="$3'))}return t}function i(t,e){var a="",i=e.lastIndexOf("/");if(-1!=i&&(a=e.slice(0,i+1),"/"==a.charAt(0))){"/"==!t.charAt(0)&&(t="/"+t);var n=1;i=n;do i=a.indexOf("/",i)+1,i>n&&a.slice(0,i)==t.slice(0,i)&&(n=i);while(i>0&&i==n);var r="";i=n;do i=t.indexOf("/",i+1),-1!=i&&(r+="../");while(-1!=i);a=r+a.slice(n)}return a}var n=0,r=!1,o=null,s={},l=window.location.href,d={},c=null,h=[],f=0,g={options:function(e){o=t.extend({defaultPageTransition:"fade",domCache:!1},e)},init:function(a,i,g){r||(r=!0,t(document.body).transition("options",{}),t(window).on("hashchange",function(){var e=c&&c.element||t(document.body);if(!d[window.location.hash]){var a=window.location.hash,i=t("div.ui-fxpage-active").attr("id");i&&(i="#"+i),c&&c.element&&c.element.is("form")&&(a={type:c.element.attr("method")||"get",url:window.location.hash.slice(1),data:c.element.serialize(),dataType:"html",global:!1});var n=null,r=null==c,s=0;if(r)f<h.length&&h[f].to==a?(c=h[f++],r=!1):f>0&&(c=h[--f],r=c?!c.reverse:!0),n=c?c.transition:o.defaultPageTransition,c&&(s=c.top||0,!a&&t(c.from).length&&(a=c.from));else if(c.transition)n=c.transition,h[f++]={to:a,from:i,transition:n,top:t(window).scrollTop()},r=c.reverse;else{n=c.element.attr("transition")||c.element.data("transition")||o.defaultPageTransition;var l=c.element.attr("direction")||c.element.data("direction");"reverse"===l&&(r=!0),h[f++]={to:a,from:i,transition:n,reverse:r,top:t(window).scrollTop()}}e.transition("changePage",a,n,r,s)}c=null}));var u=t('div[data-role="page"]',this);u.length||(this.is("div")?(this.attr("data-role","page"),this.attr("id","_trans_div"+n),u=this):(u=t('<div data-role="page" id="_trans_div'+n+'" />'),this.children().wrapAll(u))),a&&u.trigger("pageload",a);var v=u.first();if(window.location.hash&&(v=t(e(window.location.hash)),!v.length)){v=u.first();var p=v.attr("id"),m=e(s[window.location.hash]||window.location.hash.slice(1));v.attr("id",m),p&&t('[data-href="#'+p+'"]',u).attr("data-href","#"+m)}u.addClass("ui-fxpage"),u.each(function(){t(this).attr("id")||t(this).attr("id","_trans_div"+n),s["#"+t(this).attr("id")]=l,t(this).css("zIndex",n++)}),t("[data-href]",u).transition("hijackLinks"),t("form").not("[target]").not('[data-ajax="false"]').transition("hijackLinks"),g||(g=document.title),u.not("[data-title]").data("title",g),g=v.data("title"),g&&(document.title=g),u.hide();var w=i?t(i):null;return w=w||v,w.addClass("ui-fxpage-active"),u.each(function(){t(this).trigger("pageinit",t(this))}),w},to:function(t,e,a){e=e||o.defaultPageTransition,a||(a=!1),c={transition:e,reverse:a},window.location.hash="#"+t},hijackLinks:function(){return this.each(function(){var e=t(this);if("back"==e.data("rel")){var a=function(t){window.history.back(),t.preventDefault()};return e.on("click",a),e.on("tap",a),void 0}var i=e.attr("data-href")||e.attr("href")||e.attr("action")||"#";if("#"===i.charAt(0)){if(t('a[name="'+i.slice(1)+'"]').length)return d[i]=!0,void 0}else i="#"+i,e.is("a")?e.attr("href",i):e.attr("action")&&e.attr("action",i),e.attr("data-href")&&e.attr("data-href",i);var a;e.is("a")?a=function(){c={element:e}}:e.is("form")?(a=function(t){c={element:e},window.location.href=i,t.preventDefault()},e.on("submit",a)):a=function(){c={element:e},window.location.href=i},e.is("form")||(e.on("click",a),e.on("tap",a))})},changePage:function(a,i,n,r){var l={toPage:a,back:n},d=t.Event("pagebeforechange");if(t(this).trigger(d,l),!d.defaultPrevented){a=l.toPage,n=l.back;var c="string"==typeof a?a:a.url,h=null,f=t("div.ui-fxpage-active"),g=!1;if("string"==typeof a&&"#"===a.charAt(0)){var u=t(e(a));u.length?(t(this).transition("perform",f,u,i,n,r,l),g=!0):!o.domCache&&s[a]?(h=a,a=s[a]):a=a.slice(1)}if(!g){var v={href:c,element:t(this),back:n},d=t.Event("pagebeforeload");t(this).trigger(d,v);var p=t(this);d.defaultPrevented||(t(this).transition("load",a,v,function(e,a,o){var s=t('<div data-role="page-container" />');s.html(e),t(document.body).append(s);var d=t(s).transition("init",v,h,o);t(p).transition("perform",f,d,i,n,r,l)}),g=!0)}g||t(this).trigger("pagechangefailed",l)}},load:function(e,i,n){e="string"==typeof e?{url:e,dataType:"html",global:!1}:e,e.url||(e.url=window.location.href),e.success=function(r,s,d){i.xhr=d,i.textStatus=s,l=e.url,o.domCache||t('div[data-role="page"]').not('[data-dom-cache="true"]').addClass("transition-recyclable");var c,h=r.search(/<body/i),f=r,g=r;-1!=h&&(f=r.slice(0,h),h=r.indexOf(">",h),bodyEnd=r.search(/<\/body>/i),g=r.slice(h+1,bodyEnd));var u=f.match(/<title>(.+)<\/title>/im);u&&(c=u[1]),g=a(g),n(g,r,c)},e.error=function(a,n,r){i.xhr=a,i.textStatus=n,i.errorThrown=r,t(this).trigger("pageloadfailed",i),t(this).trigger("pagechangefailed",{toPage:e.url})},t.ajax(e)},perform:function(e,a,i,n,r,s){s.from=e,s.to=a,e.trigger("pagebeforehide",e),a.trigger("pagebeforeshow",a),window.setTimeout(function(){e.addClass(i+" out"),e.removeClass("ui-fxpage-active");var t=a.position();a.css({top:t.top-r}),a.show(),a.addClass(i+" in"),a.addClass("ui-fxpage-active"),n&&(e.addClass("reverse"),a.addClass("reverse"))},1),window.setTimeout(function(){e.removeClass(i+" out"),a.removeClass(i+" in"),e.removeClass("reverse"),a.removeClass("reverse"),a.css({top:0}),window.scrollTo(0,r);var n=a.data("title");n&&(document.title=n),e.trigger("pagehide",e),a.trigger("pageshow",a),t(document).trigger("pagechange",s),t('div[data-role="page"]').hide(),a.show(),o.domCache||(t("div.transition-recyclable").each(function(){var e=t.Event("pageremove");t(this).trigger(e,t(this)),e.defaultPrevented||t(this).remove()}),t('div[data-role="page-container"]').not(function(){return t(this).children().length}).remove())},707)}};t.fn.transition=function(t){if(g[t])return g[t].apply(this,Array.prototype.slice.call(arguments,1));if("object"!=typeof t&&t)throw"Method "+t+" does not exist";return g.to.apply(this,arguments)}}(Zepto);