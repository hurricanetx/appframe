!function(t){t.fn.anim=function(t,e,n){var i,s,o=[];for(s in t)"opacity"===s?i=t[s]:o.push(s+"("+t[s]+")");return this.css({"-webkit-transition":"all "+(e||.5)+"s "+(n||""),"-webkit-transform":o.join(" "),opacity:i})}}(Zepto),function(t,e){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)},i="ontouchstart"in e,s="onorientationchange"in e?"orientationchange":"resize",o=i?"touchstart":"mousedown",r=i?"touchmove":"mousemove",a=i?"touchend":"mouseup",h=i?"touchcancel":"mouseup",c="webkitTransitionEnd",l=function(){function l(e,n){this.$el=t(e),this.options=t.extend({},t.fn.snapscroll.defaults,n),this.init()}return l.prototype={constructor:l,name:"SnapScroll",version:"0.1.1",init:function(){this.$pages=this.$el.children(),this.length=this.$pages.length-1,this.curIndex=0,this.newIndex=0,this.startTime=null,this.drag=null,this.startY=null,this.direction=null,this.directionLocked=null,this.$target=null,this._initEvent()},_initEvent:function(){this.$el.on(o,t.proxy(this.handleEvent,this)).on(r,t.proxy(this.handleEvent,this)).on(a,t.proxy(this.handleEvent,this)).on(h,t.proxy(this.handleEvent,this)),this.$pages.on(c,t.proxy(this.handleEvent,this)),e.addEventListener(s,this,!1)},handleEvent:function(t){switch(t.type){case"tap":this._start(t);break;case o:this._start(t);break;case r:this._move(t);break;case a:case h:this._end(t);break;case c:this._flip(t);break;case s:this._resize()}},_start:function(t){if(!this.moved){var e=i?t.touches[0]:t;this._resize(),this.drag=!0,this.startX=e.pageX,this.startY=e.pageY}},_move:function(t){var e=this;if(t.preventDefault(),t.stopPropagation(),!e.moved&&e.drag){var n,s,o,r=i?t.touches[0]:t,a=r.pageX-e.startX,h=r.pageY-e.startY;if(e.absDistX=Math.abs(a),e.absDistY=Math.abs(h),!(e.absDistX<10&&e.absDistY<10)){if(!e.directionLocked){if(o=e.absDistX-e.absDistY-e.options.directionLockThreshold>0,"n"===e.options.scroll&&o||"h"===e.options.scroll?(e.directionLocked="h",e.direction=a>0?"LEFT":"RIGHT"):(e.directionLocked="v",e.direction=h>0?"DOWN":"UP"),e.newIndex="LEFT"===e.direction||"DOWN"===e.direction?e.curIndex-1:e.curIndex+1,e.options.loop)e.newIndex<0&&(e.newIndex=e.length),e.newIndex>e.length&&(e.newIndex=0);else if(e.newIndex<0||e.newIndex>e.length)return;e.$target=e.$pages.eq(e.newIndex),e.$el.trigger("start:"+e.name,[e.curIndex,e.newIndex,e.direction])}e.$target&&("UP"===e.direction?(n=0,s=e.height+h):"DOWN"===e.direction?(n=0,s=h-e.height):"LEFT"===e.direction?(n=a-e.width,s=0):"RIGHT"===e.direction&&(n=e.width+a,s=0),e.x=n,e.y=s,e._translate(n,s))}}},_end:function(){var t,e,n=0,i=0,s=this;s.drag=null,s.options.loop||(s.directionLocked=null,s.newIndex<0&&(s.newIndex=0),s.newIndex>s.length&&(s.newIndex=s.length)),s.$target&&s.$target.length&&(s.moved=!0,s.change=!0,t=s.height/s.absDistY>s.options.scrollThreshold,e=s.width/s.absDistX>s.options.scrollThreshold,"UP"===s.direction&&t?(n=0,i=s.height,s.change=null):"DOWN"===s.direction&&t?(n=0,i=-s.height,s.change=null):"LEFT"===s.direction&&e?(n=-s.width,i=0,s.change=null):"RIGHT"===s.direction&&e&&(n=s.width,i=0,s.change=null),s._scrollTo(n,i))},_flip:function(){this.moved&&(this._offTranslate(),this.directionLocked=null,this.moved=null,this.change&&(this.$pages.eq(this.curIndex).removeClass("show"),this.$target.addClass("show"),this.curIndex=this.newIndex),this.$target.removeClass("active").removeAttr("style"),this.$target=null,this.change=null,this.$el.trigger("done:"+this.name,[this.newIndex,this.direction]))},_resize:function(){this.width=this.$el.width(),this.height=this.$el.height()},_translate:function(t,e){var i=this;n(function(){i.$target&&i.$target.addClass("active").css({"-webkit-transform":"translate3d("+t+"px,"+e+"px,0)"})})},_scrollTo:function(t,e,n){n=n||this.options.speed,this.options.useTransition?(this.$target.css("-webkit-transition","-webkit-transform "+n+"ms"),this._translate(t,e)):this._animate(t,e,n)},_animate:function(t,e,i){function s(){return"v"==o.directionLocked&&r>0?(o.y+=a,o.y>e&&(o.y=e),o._translate(0,o.y)):"v"==o.directionLocked&&0>r?(o.y+=a,o.y<e&&(o.y=e),o._translate(0,o.y)):"h"==o.directionLocked&&r>0?(o.x+=a,o.x>t&&(o.x=t),o._translate(o.x,0)):"h"==o.directionLocked&&0>r&&(o.x+=a,o.x<t&&(o.x=t),o._translate(o.x,0)),"v"==o.directionLocked&&o.y===e||"h"==o.directionLocked&&o.x===t?(o._flip(),void 0):(("v"==o.directionLocked&&r>0&&o.y<e||"v"==o.directionLocked&&0>r&&o.y>e||"h"==o.directionLocked&&0>r&&o.x>t||"h"==o.directionLocked&&r>0&&o.x<t)&&n(s),void 0)}var o=this,r="v"==o.directionLocked?e-o.y:t-o.x,a=r/i*16;0!==r&&s()},_offTranslate:function(){this.$target.css("-webkit-transition","-webkit-transform 0ms")},goTo:function(t,e){this.curIndex==t||this.isAnimating||(this.newIndex=t,this.$target=this.$pages.eq(this.newIndex),"n"===this.options.scroll&&"v"===e)}},l}();t.fn.snapscroll=function(e){return this.each(function(){var n=t(this),i=t.fn.snapscroll.lookup[n.data("snapscroll")];return i||(t.fn.snapscroll.lookup[++t.fn.snapscroll.lookup.i]=new l(this,e),n.data("snapscroll",t.fn.snapscroll.lookup.i),i=t.fn.snapscroll.lookup[n.data("snapscroll")]),"string"==typeof e?i[e].apply(i,[].slice.call(arguments,1)):void 0})},t.fn.snapscroll.lookup={i:0},t.fn.snapscroll.defaults={directionLockThreshold:5,scroll:"n",scrollThreshold:10,speed:400,loop:!0,useTransition:!0}}(Zepto,window);