<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="format-detection" content="telephone=no"/>
    <meta name="viewport" content="width=device-width,user-scalable=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <title>uikit-module-scrape</title>
    <link rel="stylesheet" type="text/css" href="../assets/css/zen.min.css">
    <link rel="stylesheet" type="text/css" href="assets/uikit.css">
    <script src="../assets/vector/zepto.min.js"></script>
    <script src="../assets/vector/zen.min.js"></script>
</head>
<body class="ui-tapcopy">

    <div class="ui-page-navbar ui-hide">
        <div class="ui-page-inner">
            <span class="ui-navbar-left ui-operate">
                <a href="uikit.html">
                    <i class="icon icon-back"></i>
                    <span>UIKit</span>
                </a>
            </span>
            <span class="ui-navbar-center ui-navbar-text">刮开涂层</span>
        </div>
    </div>
    <style>
    #lll {
        background: url(http://gw.alicdn.com/tps/i4/T1H.OEFBFaXXbIzVMs-640-615.png) no-repeat;
        background-size: contain;
        width:254px;
        padding: 139px 29px 19px 29px;
        margin:0 auto;
    }
    #lotteryContainer {
        position: relative;
        width:254px;
        height:142px;
        cursor: pointer;
    }
    p.center{
        padding-top: 10px;
        text-align: center;
    }
    #drawPercent {
        color:#F60;
    }
    </style>
    <div class="ui-panel ui-border-tb">
        <div id="lll">
            <div id="lotteryContainer"></div>
        </div>
        <p class="center"><button id="freshBtn" class="ui-btn">刷新彩票</button></p>
        <p class="center"><label>已刮开 <span id="drawPercent">0%</span> 区域。</label></p>
    </div>
    <div class="ui-panel ui-border-tb">
        已知bug，在ios 横屏模式下，刮开位置不正确
    </div>
    <script type="text/javascript" src="../assets/module/effect.scrape.min.js"></script>
    <script type="text/javascript" src="../assets/module/ui.autoapp.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
        $("body").autoapp();
        function getRandomStr(len) {
            var text = "";
            var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
            for( var i=0; i < len; i++ )
                text += possible.charAt(Math.floor(Math.random() * possible.length));
            return text;
        }
        var lottery = $("#lotteryContainer").scrape({lottery:'谢谢惠顾',type:'text'},function(percent){
            $('#drawPercent').html(percent + '%');
        });

        $('#freshBtn').tap(function() {
            $('#drawPercent').html('0%');
            lottery.update(getRandomStr(10), 'text');
        });

    });
    </script>  
</body>
</html>